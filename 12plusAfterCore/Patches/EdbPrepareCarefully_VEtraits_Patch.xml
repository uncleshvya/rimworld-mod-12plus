<?xml version="1.0" encoding="utf-8" ?>

<!-- CC BY-NC-SA 4.0
Copyright (c) Oskar Potocki
-->

<Patch>
	<Operation MayRequire="EdB.PrepareCarefully" Class="PatchOperationSequence">
		<success>Always</success>
		<operations>
			<!-- Трейты в ванили жёстко прописаны - так просто их не удалить.
			Красивое и совместимое с сетевыми модами решение не найдено, пока что удалось сделать их серыми либо одиноко-бесполезными, максимально сокращающими время возможного общения пешки.
			Так как у 12+мода зависимость от VEtraits, заодно и их прописываем, с оглядкой на файл VEtraits_Patch.xml -->
			<li Class="PatchOperationAdd">
				<xpath>Defs/TraitDef[
				defName = "Asexual" or
				defName = "Bisexual" or
				defName = "Cannibal" or
				defName = "Gay" or
				defName = "Masochist" or
				defName = "VTE_DrunkenMaster"
				]/degreeDatas/li[1]</xpath>
				<value>
					<hungerRateFactor>100</hungerRateFactor>
					<randomDiseaseMtbDays>0</randomDiseaseMtbDays>
					<socialFightChanceFactor>100</socialFightChanceFactor>
					<statFactors>
						<EatingSpeed>0.01</EatingSpeed>
					</statFactors>
					<statOffsets>
						<MentalBreakThreshold>1</MentalBreakThreshold>
						<MoveSpeed>-10</MoveSpeed>
						<PainShockThreshold>-1</PainShockThreshold>
					</statOffsets>
					<theOnlyAllowedMentalBreaks>
						<li>Berserk</li>
					</theOnlyAllowedMentalBreaks>
					<randomMentalState>Berserk</randomMentalState>
					<randomMentalStateMtbDaysMoodCurve>
						<points>
							<li>(0, 100)</li>
						</points>
					</randomMentalStateMtbDaysMoodCurve>
				</value>
			</li>
			
			<!-- У пиромана уже были прописаны срывы, заменяем.
			Добавляем намёк на английскую локализацию 12+мода -->
			<li Class="PatchOperationReplace">
				<xpath>Defs/TraitDef[defName = "Pyromaniac"]/degreeDatas/li[1]</xpath>
				<value>
					<li>
						<label>saboteur</label>
						<description>{PAWN_nameDef} only likes to destroy. {PAWN_pronoun} is absolutely unsuitable for life in the colony, it's better to send {PAWN_possessive} to the enemy.</description>
						<hungerRateFactor>100</hungerRateFactor>
						<randomDiseaseMtbDays>0</randomDiseaseMtbDays>
						<socialFightChanceFactor>100</socialFightChanceFactor>
						<statFactors>
							<EatingSpeed>0.01</EatingSpeed>
						</statFactors>
						<statOffsets>
							<MentalBreakThreshold>1</MentalBreakThreshold>
							<MoveSpeed>-10</MoveSpeed>
							<PainShockThreshold>-1</PainShockThreshold>
						</statOffsets>
						<theOnlyAllowedMentalBreaks>
							<li>Berserk</li>
						</theOnlyAllowedMentalBreaks>
						<randomMentalState>Berserk</randomMentalState>
						<randomMentalStateMtbDaysMoodCurve>
							<points>
								<li>(0, 100)</li>
							</points>
						</randomMentalStateMtbDaysMoodCurve>
					</li>
				</value>
			</li>
			<!-- Аналогично у клептомана: -->
			<li Class="PatchOperationReplace">
				<xpath>Defs/TraitDef[defName = "VTE_Kleptomaniac"]/degreeDatas/li[1]</xpath>
				<value>
					<li>
						<label>misanthrope</label>
						<description>{PAWN_nameDef} has a hard time getting along with other settlers, and {PAWN_pronoun} treats strangers with an irresistible aversion. {PAWN_pronoun} will try to drive all the guests out of the settlement in any way, even if it means angering the other party.</description>
						<hungerRateFactor>100</hungerRateFactor>
						<randomDiseaseMtbDays>0</randomDiseaseMtbDays>
						<socialFightChanceFactor>100</socialFightChanceFactor>
						<statFactors>
							<EatingSpeed>0.01</EatingSpeed>
						</statFactors>
						<statOffsets>
							<MentalBreakThreshold>1</MentalBreakThreshold>
							<MoveSpeed>-10</MoveSpeed>
							<PainShockThreshold>-1</PainShockThreshold>
						</statOffsets>
						<theOnlyAllowedMentalBreaks>
							<li>Berserk</li>
						</theOnlyAllowedMentalBreaks>
						<randomMentalState>Berserk</randomMentalState>
						<randomMentalStateMtbDaysMoodCurve>
							<points>
								<li>(0, 100)</li>
							</points>
						</randomMentalStateMtbDaysMoodCurve>
					</li>
				</value>
			</li>
			<!-- Ванильные и VET трейты, у которых не было конфликтов: -->
			<li Class="PatchOperationAdd">
				<xpath>Defs/TraitDef[
				defName = "Nudist" or
				defName = "Bloodlust" or
				defName = "Psychopath" or
				defName = "Cannibal" or
				defName = "Abrasive" or
				defName = "NightOwl" or
				defName = "Gay" or
				defName = "Bisexual" or
				defName = "Asexual" or
				defName = "AnnoyingVoice" or
				defName = "CreepyBreathing" or
				defName = "Pyromaniac" or
				defName = "Nimble" or
				defName = "FastLearner" or
				defName = "Undergrounder" or
				defName = "DislikesMen" or
				defName = "DislikesWomen" or
				defName = "GreatMemory" or
				defName = "Tough" or
				defName = "TorturedArtist" or
				defName = "QuickSleeper" or
				defName = "SpeedOffset" or
				defName = "DrugDesire" or
				defName = "NaturalMood" or
				defName = "Nerves" or
				defName = "Neurotic" or
				defName = "Industriousness" or
				defName = "PsychicSensitivity" or
				defName = "Beauty" or
				defName = "Immunity" or
				defName = "VTE_Perfectionist" or
				defName = "VTE_HeavySleeper" or
				defName = "VTE_BigBoned" or
				defName = "VTE_MartialArtist" or
				defName = "VTE_CouchPotato" or
				defName = "VTE_ChildOfSea" or
				defName = "VTE_ChildOfMountain" or
				defName = "VTE_MadSurgeon" or
				defName = "VTE_DrunkenMaster" or
				defName = "VTE_Kleptomaniac" or
				defName = "VTE_Wanderlust" or
				defName = "VTE_WorldWeary" or
				defName = "VTE_Academian" or
				defName = "VTE_Groundbreaker" or
				defName = "VTE_Gastronomist" or
				defName = "VTE_Ecologist" or
				defName = "VTE_Tycoon"
				]</xpath>
				<value>
					<conflictingTraits>
						<li>Asexual</li>
						<li>Bisexual</li>
						<li>Cannibal</li>
						<li>Gay</li>
						<li>Masochist</li>
						<li>Pyromaniac</li>
						<li>VTE_DrunkenMaster</li>
						<li>VTE_Kleptomaniac</li>
					</conflictingTraits>
				</value>
			</li>
			
			<!-- Ванильные и VET трейты, у которых уже были конфликты.
			У хлюпика уже был указан Masochist, но это не мешает.
			У VTE_Lush была ошибка в коде, но она не мешает, и даже превращается в фичу -->
			<li Class="PatchOperationAdd">
				<xpath>Defs/TraitDef[
				defName = "Kind" or
				defName = "TooSmart" or
				defName = "Brawler" or
				defName = "Masochist" or
				defName = "Greedy" or
				defName = "Jealous" or
				defName = "Ascetic" or
				defName = "SlowLearner" or
				defName = "Transhumanist" or
				defName = "BodyPurist" or
				defName = "Gourmand" or
				defName = "ShootingAccuracy" or
				defName = "Wimp" or
				defName = "VTE_AbsentMinded" or
				defName = "VTE_Eccentric" or
				defName = "VTE_Coward" or
				defName = "VTE_Brave" or
				defName = "VTE_Clumsy" or
				defName = "VTE_HeatInclined" or
				defName = "VTE_ColdInclined" or
				defName = "VTE_Neat" or
				defName = "VTE_Slob" or
				defName = "VTE_Workaholic" or
				defName = "VTE_IronStomach" or
				defName = "VTE_AnimalLover" or
				defName = "VTE_AnimalHater" or
				defName = "VTE_Rebel" or
				defName = "VTE_Submissive" or
				defName = "VTE_Vengeful" or
				defName = "VTE_Technophobe" or
				defName = "VTE_FunLoving" or
				defName = "VTE_Dunce" or
				defName = "VTE_Snob" or
				defName = "VTE_Squeamish" or
				defName = "VTE_Anxious" or
				defName = "VTE_Insatiable" or
				defName = "VTE_Prude" or
				defName = "VTE_CatPerson" or
				defName = "VTE_DogPerson" or
				defName = "VTE_Prodigy" or
				defName = "VTE_Menagerist" or
				defName = "VTE_Stoner" or
				defName = "VTE_Lush" or
				defName = "VTE_Insomniac" or
				defName = "VTE_Desensitized" or
				defName = "VTE_RefinedPalate" or
				defName = "VTE_ThickSkinned" or
				defName = "VTE_ThinSkinned" or
				defName = "VTE_Schizoid"
				]/conflictingTraits</xpath>
				<value>
					<li>Asexual</li>
					<li>Bisexual</li>
					<li>Cannibal</li>
					<li>Gay</li>
					<li>Masochist</li>
					<li>Pyromaniac</li>
					<li>VTE_DrunkenMaster</li>
					<li>VTE_Kleptomaniac</li>
				</value>
			</li>
			
			<!-- Оставить эти скрытые строки как инструкцию по оптимизации патчей типа AndroidTiers_Patch.xml.
			У хлюпика уже был указан Masochist.
			<li Class="PatchOperationAdd">
				<xpath>Defs/TraitDef[defName = "Wimp"]/conflictingTraits</xpath>
				<value>
					<li>Asexual</li>
					<li>Bisexual</li>
					<li>Cannibal</li>
					<li>Gay</li>
					<li>Pyromaniac</li>
					<li>VTE_DrunkenMaster</li>
					<li>VTE_Kleptomaniac</li>
				</value>
			</li>
			-->

		</operations>
	</Operation>
</Patch>
